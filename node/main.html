<!doctype html>
<html>
  <head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>BeagleBone Black Oscilloscope</title>

	<!-- scripts loaded first -->
	<script src="/socket.io/socket.io.js"></script>
	<script src="/js/jquery.min.js"></script>
        <script src="/js/jquery.flot.js"></script>

	<!-- script to update oscilloscope when data is pushed from server to client -->
	<script>
	  var socket = io();
	  socket.on('notification', function (data) {
	    $.plot("#oscilloscope", [data.theData]);
  	  });
	</script>
  </head>
  <body>
	<div class="container">

	  <!-- Oscilloscope plot -->
	  <div id="oscilloscope" style="width:100%;height:512px"></div>

	  <!-- Tabs -->
	  <ul class="nav nav-tabs">
	    <li class="active"><a data-toggle="tab" href="#openLoop">Open Loop</a></li>
	    <li><a data-toggle="tab" href="#closedLoop">Closed Loop</a></li>
	    <li><a data-toggle="tab" href="#pidControl">PID Control</a></li>
	  </ul>

	  <!-- tab content -->
	  <div class="tab-content">

	    <!-- open loop tab -->
	    <div id="openLoop" class="tab-pane fade in active">
	      <h3><!--    --></h3>
	      <form class="form-inline" autocomplete="off">
		<div class="form-group">
		  <label for="openAmpl" class="col-xs-4 control-label">Amplitude</label>
        	  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="openAmpl" step="1" min="0" max="65536" placeholder="">
		    <div class="input-group-addon">V</div>
	          </div>
		  <h3><!--    --></h3>
		  <label for="openFreq" class="col-xs-4 control-label">Frequency</label>
        	  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="openFreq" placeholder="">
		    <div class="input-group-addon">Hz</div>
		  </div>
    	        </div>
	      </form>
	    </div>

	    <!-- closed loop tab -->
	    <div id="closedLoop" class="tab-pane fade">
	      <h3><!--    --></h3>
	      <form class="form-inline" autocomplete="off">
		<div class="form-group">
		  <label for="closedFreq" class="col-xs-4 control-label">Frequency</label>
		  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="closedFreq" placeholder="">
		    <div class="input-group-addon">Hz</div>
		  </div>
		  <h3><!--    --></h3>
		  <label for="closedkP" class="col-xs-4 control-label">Proportional</label>
		  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="closedkP" placeholder="">
		  </div>
		  <h3><!--    --></h3>
		  <label for="closedkI" class="col-xs-4 control-label">Integral</label>
		  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="closedkI" placeholder="">
		  </div>
		  <h3><!--    --></h3>
		  <label for="closedkD" class="col-xs-4 control-label">Derivative</label>
		  <div class="col-xs-8 input-group">
		    <input type="number" class="form-control" id="closedkD" placeholder="">
		  </div>
	        </div>
	      </form>
	    </div>
	  </div>

	  <!-- bootstrap navbar -->
	  <nav class="navbar navbar-inverse navbar-fixed-bottom">
	    <div class="container">
	      <div class="navbar-header">
		<a class="navbar-brand">BeagleBone Black Oscilloscope</a>
		<button onclick="run()" class="btn btn-primary navbar-btn" aria-expanded="false">RUN</button>

		<!-- run function -->
	   	<script>
		function run(){
	      	  socket.emit('run');
		}
	  	</script>
	      </div>
	    </div>
	  </nav>

	</div><!-- container -->

	<!-- bootstrap scripts -->
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<script src="/js/bootstrap.min.js"></script>
  </body>
</html>
